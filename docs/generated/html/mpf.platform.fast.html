<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mpf.platform.fast module &mdash; Mission Pinball Framework 0.18.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.18.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Mission Pinball Framework 0.18.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">Mission Pinball Framework 0.18.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-mpf.platform.fast">
<span id="mpf-platform-fast-module"></span><h1>mpf.platform.fast module</h1>
<p>Contains the hardware interface and drivers for the FAST Pinball platform
hardware, including the FAST Core and FAST WPC controllers.</p>
<p>This code is written for the libfastpinball v1.0, released Dec 19, 2014.</p>
<p><a class="reference external" href="https://github.com/fastpinball/libfastpinball">https://github.com/fastpinball/libfastpinball</a></p>
<dl class="class">
<dt id="mpf.platform.fast.FASTDMD">
<em class="property">class </em><tt class="descclassname">mpf.platform.fast.</tt><tt class="descname">FASTDMD</tt><big>(</big><em>machine</em>, <em>fast_device</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="mpf.platform.fast.FASTDMD.tick">
<tt class="descname">tick</tt><big>(</big><big>)</big></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.FASTDMD.update">
<tt class="descname">update</tt><big>(</big><em>data</em><big>)</big></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpf.platform.fast.FASTDirectLED">
<em class="property">class </em><tt class="descclassname">mpf.platform.fast.</tt><tt class="descname">FASTDirectLED</tt><big>(</big><em>number</em>, <em>fast_device</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="mpf.platform.fast.FASTDirectLED.color">
<tt class="descname">color</tt><big>(</big><em>color</em><big>)</big></dt>
<dd><p>Instantly sets this LED to the color passed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>color</strong> &#8211; a 3-item list of integers representing R, G, and B values,</li>
<li><strong>each.</strong> (<em>0-255</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.FASTDirectLED.disable">
<tt class="descname">disable</tt><big>(</big><big>)</big></dt>
<dd><p>Disables (turns off) this LED instantly. For multi-color LEDs it
turns all elements off.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.FASTDirectLED.enable">
<tt class="descname">enable</tt><big>(</big><big>)</big></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.FASTDirectLED.fade">
<tt class="descname">fade</tt><big>(</big><em>color</em>, <em>fade_ms</em><big>)</big></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpf.platform.fast.FASTDriver">
<em class="property">class </em><tt class="descclassname">mpf.platform.fast.</tt><tt class="descname">FASTDriver</tt><big>(</big><em>number</em>, <em>fast_device</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Base class for drivers connected to a FAST Controller.</p>
<dl class="docutils">
<dt>fpWriteDriver (</dt>
<dd><blockquote class="first">
<div>device
id
mode (see below)
triggerType (see below)
triggerSwitch (switch id number)
onTime (in ms)
offTime (in ms)
pwm (int from 0 to 32)
target (connection type. 0 = local, 1 = network)
)</div></blockquote>
<dl class="last docutils">
<dt>mode options</dt>
<dd>fastpinball.FP_DRIVER_MODE_PULSED
fastpinball.FP_DRIVER_MODE_LATCHED
fastpinball.FP_DRIVER_MODE_DELAY</dd>
<dt>triggerType options</dt>
<dd>fastpinball.FP_DRIVER_TRIGGER_TYPE_OFF
fastpinball.FP_DRIVER_TRIGGER_TYPE_MANUAL
fastpinball.FP_DRIVER_TRIGGER_TYPE_SWITCH_ON
fastpinball.FP_DRIVER_TRIGGER_TYPE_SWITCH_OFF</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="mpf.platform.fast.FASTDriver.disable">
<tt class="descname">disable</tt><big>(</big><big>)</big></dt>
<dd><p>Disables (turns off) this driver.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.FASTDriver.enable">
<tt class="descname">enable</tt><big>(</big><big>)</big></dt>
<dd><p>Enables (turns on) this driver.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.FASTDriver.pulse">
<tt class="descname">pulse</tt><big>(</big><em>milliseconds=None</em><big>)</big></dt>
<dd><p>Pulses this driver.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.FASTDriver.pwm">
<tt class="descname">pwm</tt><big>(</big><em>on_ms=10</em>, <em>off_ms=10</em>, <em>original_on_ms=0</em>, <em>now=True</em><big>)</big></dt>
<dd><p>Enables this driver in a pwm pattern.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpf.platform.fast.FASTGIString">
<em class="property">class </em><tt class="descclassname">mpf.platform.fast.</tt><tt class="descname">FASTGIString</tt><big>(</big><em>number</em>, <em>fast_device</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="mpf.platform.fast.FASTGIString.off">
<tt class="descname">off</tt><big>(</big><big>)</big></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.FASTGIString.on">
<tt class="descname">on</tt><big>(</big><em>brightness=255</em>, <em>fade_ms=0</em>, <em>start=0</em><big>)</big></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpf.platform.fast.FASTMatrixLight">
<em class="property">class </em><tt class="descclassname">mpf.platform.fast.</tt><tt class="descname">FASTMatrixLight</tt><big>(</big><em>number</em>, <em>fast_device</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="mpf.platform.fast.FASTMatrixLight.off">
<tt class="descname">off</tt><big>(</big><big>)</big></dt>
<dd><p>Disables (turns off) this driver.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.FASTMatrixLight.on">
<tt class="descname">on</tt><big>(</big><em>brightness=255</em>, <em>fade_ms=0</em>, <em>start=0</em><big>)</big></dt>
<dd><p>Enables (turns on) this driver.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpf.platform.fast.FASTSwitch">
<em class="property">class </em><tt class="descclassname">mpf.platform.fast.</tt><tt class="descname">FASTSwitch</tt><big>(</big><em>number</em>, <em>debounce_on</em>, <em>debounce_off</em>, <em>fast_device</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="docutils">
<dt>fpWriteSwitchConfig params:</dt>
<dd><p class="first">fp_device (self.fast)
switch number (switch number as int)
mode (0 = no report, 1 = report on, 2 = report inverted
debounce close
debounce open
sound
target (0 = local, 1 = network)</p>
<p class="last">todo add support for different debounce open and close times</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="mpf.platform.fast.HardwarePlatform">
<em class="property">class </em><tt class="descclassname">mpf.platform.fast.</tt><tt class="descname">HardwarePlatform</tt><big>(</big><em>machine</em><big>)</big></dt>
<dd><p>Bases: <a class="reference internal" href="mpf.system.platform.html#mpf.system.platform.Platform" title="mpf.system.platform.Platform"><tt class="xref py py-class docutils literal"><span class="pre">mpf.system.platform.Platform</span></tt></a></p>
<p>Platform class for the FAST hardware controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>machine</strong> &#8211; The main <tt class="docutils literal"><span class="pre">MachineController</span></tt> instance.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.clear_hw_rule">
<tt class="descname">clear_hw_rule</tt><big>(</big><em>sw_name</em><big>)</big></dt>
<dd><p>Clears a hardware rule.</p>
<p>This is used if you want to remove the linkage between a switch and
some driver activity. For example, if you wanted to disable your
flippers (so that a player pushing the flipper buttons wouldn&#8217;t cause
the flippers to flip), you&#8217;d call this method with your flipper button
as the <em>sw_num</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sw_name</strong> &#8211; The string name of the switch whose rule you want to clear.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.configure_dmd">
<tt class="descname">configure_dmd</tt><big>(</big><big>)</big></dt>
<dd><p>Configures a hardware DMD connected to a FAST controller.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.configure_driver">
<tt class="descname">configure_driver</tt><big>(</big><em>config</em>, <em>device_type='coil'</em><big>)</big></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.configure_gi">
<tt class="descname">configure_gi</tt><big>(</big><em>config</em><big>)</big></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.configure_led">
<tt class="descname">configure_led</tt><big>(</big><em>config</em><big>)</big></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.configure_matrixlight">
<tt class="descname">configure_matrixlight</tt><big>(</big><em>config</em><big>)</big></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.configure_switch">
<tt class="descname">configure_switch</tt><big>(</big><em>config</em><big>)</big></dt>
<dd><p>Configures the switch object for a FAST Pinball controller.</p>
<p>FAST Controllers support two types of switches: <cite>local</cite> and <cite>network</cite>.
Local switches are switches that are connected to the FAST controller
board itself, and network switches are those connected to a FAST I/O
board.</p>
<p>MPF needs to know which type of switch is this is. You can specify the
switch&#8217;s connection type in the config file via the <tt class="docutils literal"><span class="pre">connection:</span></tt>
setting (either <tt class="docutils literal"><span class="pre">local</span></tt> or <tt class="docutils literal"><span class="pre">network</span></tt>).</p>
<p>If a connection type is not specified, this method will use some
intelligence to try to figure out which default should be used.</p>
<p>If the DriverBoard type is <tt class="docutils literal"><span class="pre">fast</span></tt>, then it assumes the default is
<tt class="docutils literal"><span class="pre">network</span></tt>. If it&#8217;s anything else (<tt class="docutils literal"><span class="pre">wpc</span></tt>, <tt class="docutils literal"><span class="pre">system11</span></tt>, <tt class="docutils literal"><span class="pre">bally</span></tt>,
etc.) then it assumes the connection type is <tt class="docutils literal"><span class="pre">local</span></tt>. Connection types
can be mixed and matched in the same machine.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.get_switch_state">
<tt class="descname">get_switch_state</tt><big>(</big><em>switch</em><big>)</big></dt>
<dd><p>Returns the hardware state of a switch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>switch</strong> &#8211; A class <cite>Switch</cite> object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Integer 1 if the switch is active, and 0 if the switch is
inactive. This method does not compensate for NO or NC status,
rather, it returns the raw hardware state of the switch.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.run_loop">
<tt class="descname">run_loop</tt><big>(</big><big>)</big></dt>
<dd><p>Loop code which checks the controller for any events (switch state
changes or notification that a DMD frame was updated).</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.timer_initialize">
<tt class="descname">timer_initialize</tt><big>(</big><big>)</big></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mpf.platform.fast.HardwarePlatform.write_hw_rule">
<tt class="descname">write_hw_rule</tt><big>(</big><em>sw</em>, <em>sw_activity</em>, <em>coil_action_ms</em>, <em>coil=None</em>, <em>pulse_ms=0</em>, <em>pwm_on=0</em>, <em>pwm_off=0</em>, <em>delay=0</em>, <em>recycle_time=0</em>, <em>debounced=True</em>, <em>drive_now=False</em><big>)</big></dt>
<dd><p>Used to write (or update) a hardware rule to the FAST controller.</p>
<p><em>Hardware Rules</em> are used to configure the hardware controller to
automatically change driver states based on switch changes. These rules
are completely handled by the hardware (i.e. with no interaction from
the Python game code). They&#8217;re used for things that you want to happen
fast, like firing coils when flipper buttons are pushed, slingshots, pop
bumpers, etc.</p>
<p>You can overwrite existing hardware rules at any time to change or
remove them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sw</strong> &#8211; Which switch you&#8217;re creating this rule for. The parameter is a
reference to the switch object itsef.</li>
<li><strong>sw_activity</strong> &#8211; Int which specifies whether this coil should fire when
the switch becomes active (1) or inactive (0)</li>
<li><strong>coil_action_ms</strong> &#8211; Int of the total time (in ms) that this coil action
should take place. A value of -1 means it&#8217;s forever. A value of
0 means the coil disables itself when this switch goes into the
state specified.</li>
<li><strong>coil</strong> &#8211; The coil object this rule is for.</li>
<li><strong>pulse_ms</strong> &#8211; How long should the coil be pulsed (ms)</li>
<li><strong>pwm_on</strong> &#8211; If the coil should be held on at less than 100% duty cycle,
this is the &#8220;on&#8221; time (in ms).</li>
<li><strong>pwm_off</strong> &#8211; If the coil should be held on at less than 100% duty cycle,
this is the &#8220;off&#8221; time (in ms).</li>
<li><strong>delay</strong> &#8211; Not currently implemented</li>
<li><strong>recycle_time</strong> &#8211; How long (in ms) should this switch rule wait before
firing again. Put another way, what&#8217;s the &#8220;fastest&#8221; this rule
can fire? This is used to prevent &#8220;machine gunning&#8221; of
slingshots and pop bumpers. Do not use it with flippers.</li>
<li><strong>debounced</strong> &#8211; Should the hardware fire this coil after the switch has
been debounced?</li>
<li><strong>drive_now</strong> &#8211; Should the hardware check the state of the switches when
this rule is firts applied, and fire the coils if they should
be? Typically this is True, especially with flippers because you
want them to fire if the player is holding in the buttons when
the machine enables the flippers (which is done via several
calls to this method.)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/mpf.platform.fast.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">Mission Pinball Framework 0.18.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Brian Madden, Gabe Knuth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>