<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mpf.media_controller.core.media_controller module &mdash; Mission Pinball Framework 0.17 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.17',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Mission Pinball Framework 0.17 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">Mission Pinball Framework 0.17 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-mpf.media_controller.core.media_controller">
<span id="mpf-media-controller-core-media-controller-module"></span><h1>mpf.media_controller.core.media_controller module</h1>
<p>Pygame-based media controller for MPF, based on the Backbox Control Protocol
(BCP) v1.0</p>
<dl class="class">
<dt id="mpf.media_controller.core.media_controller.BCPServer">
<em class="property">class </em><tt class="descclassname">mpf.media_controller.core.media_controller.</tt><tt class="descname">BCPServer</tt><big>(</big><em>mc</em>, <em>receiving_queue</em>, <em>sending_queue</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">threading.Thread</span></tt></p>
<p>Parent class for the BCP Server thread.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>mc</strong> &#8211; A reference to the main MediaController instance.</li>
<li><strong>receiving_queue</strong> &#8211; A shared Queue() object which holds incoming BCP
commands.</li>
<li><strong>sending_queue</strong> &#8211; A shared Queue() object which holds outgoing BCP
commands.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="mpf.media_controller.core.media_controller.BCPServer.process_received_message">
<tt class="descname">process_received_message</tt><big>(</big><em>message</em><big>)</big></dt>
<dd><p>Puts a received BCP message into the receiving queue.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> &#8211; The incoming BCP message</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.BCPServer.run">
<tt class="descname">run</tt><big>(</big><big>)</big></dt>
<dd><p>The socket thread&#8217;s run loop.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.BCPServer.sending_loop">
<tt class="descname">sending_loop</tt><big>(</big><big>)</big></dt>
<dd><p>Sending loop which transmits data from the sending queue to the
remote socket.</p>
<p>This method is run as a thread.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.BCPServer.setup_server_socket">
<tt class="descname">setup_server_socket</tt><big>(</big><em>interface='localhost'</em>, <em>port=5050</em><big>)</big></dt>
<dd><p>Sets up the socket listener.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>interface</strong> &#8211; String name of which interface this socket will listen
on.</li>
<li><strong>port</strong> &#8211; Integer TCP port number the socket will listen on.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.BCPServer.stop">
<tt class="descname">stop</tt><big>(</big><big>)</big></dt>
<dd><p>Stops and shuts down the BCP server.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpf.media_controller.core.media_controller.MediaController">
<em class="property">class </em><tt class="descclassname">mpf.media_controller.core.media_controller.</tt><tt class="descname">MediaController</tt><big>(</big><em>options</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_attract_start">
<tt class="descname">bcp_attract_start</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;attract_start&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_attract_stop">
<tt class="descname">bcp_attract_stop</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_ball_end">
<tt class="descname">bcp_ball_end</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;ball_end&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_ball_start">
<tt class="descname">bcp_ball_start</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;ball_start&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_config">
<tt class="descname">bcp_config</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;config&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_error">
<tt class="descname">bcp_error</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;error&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_game_end">
<tt class="descname">bcp_game_end</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;game_end&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_game_start">
<tt class="descname">bcp_game_start</tt><big>(</big><em>**kargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;game_start&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_get">
<tt class="descname">bcp_get</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;get&#8217; command.</p>
<p>Note that this media controller doesn&#8217;t implement the &#8216;get&#8217; command at
this time, but it&#8217;s included here for completeness since the &#8216;get&#8217;
command is part of the BCP 1.0 specification so we don&#8217;t want to return
an error if we receive an incoming &#8216;get&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_goodbye">
<tt class="descname">bcp_goodbye</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;goodbye&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_hello">
<tt class="descname">bcp_hello</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;hello&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_mode_start">
<tt class="descname">bcp_mode_start</tt><big>(</big><em>name=None</em>, <em>priority=0</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;mode_start&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_mode_stop">
<tt class="descname">bcp_mode_stop</tt><big>(</big><em>name</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;mode_stop&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_player_add">
<tt class="descname">bcp_player_add</tt><big>(</big><em>number</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;player_add&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_player_score">
<tt class="descname">bcp_player_score</tt><big>(</big><em>value</em>, <em>prev_value</em>, <em>change</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;player_score&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_player_turn_start">
<tt class="descname">bcp_player_turn_start</tt><big>(</big><em>player</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;player_turn_start&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_player_variable">
<tt class="descname">bcp_player_variable</tt><big>(</big><em>name</em>, <em>value</em>, <em>prev_value</em>, <em>change</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;player_variable&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_set">
<tt class="descname">bcp_set</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;set&#8217; command.</p>
<p>Note that this media controller doesn&#8217;t implement the &#8216;set&#8217; command at
this time, but it&#8217;s included here for completeness since the &#8216;set&#8217;
command is part of the BCP 1.0 specification so we don&#8217;t want to return
an error if we receive an incoming &#8216;set&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_set_volume">
<tt class="descname">bcp_set_volume</tt><big>(</big><em>track</em>, <em>value</em><big>)</big></dt>
<dd><p>Sets the volume based on an incoming BCP &#8216;config&#8217; command.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>track</strong> &#8211; String name of the track the volume will set.</li>
<li><strong>value</strong> &#8211; Float between 0 and 1 which represents the volume level to
set.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Note: At this time only the master volume can be set with this method.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_switch">
<tt class="descname">bcp_switch</tt><big>(</big><em>name</em>, <em>state</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;switch&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_timer">
<tt class="descname">bcp_timer</tt><big>(</big><em>name</em>, <em>action</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;config&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.bcp_trigger">
<tt class="descname">bcp_trigger</tt><big>(</big><em>name</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;trigger&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.get_from_queue">
<tt class="descname">get_from_queue</tt><big>(</big><big>)</big></dt>
<dd><p>Gets and processes all queued up incoming BCP commands.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.get_pygame_events">
<tt class="descname">get_pygame_events</tt><big>(</big><big>)</big></dt>
<dd><p>Gets (and dispatches) Pygame events. Automatically called every
machine loop via the timer_tick event.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.get_window">
<tt class="descname">get_window</tt><big>(</big><big>)</big></dt>
<dd><p>Returns a reference to the onscreen display window.</p>
<p>This method will set up a window if one doesn&#8217;t exist yet. This method
exists because there are several different modules and plugins which
may want to use a window, but we don&#8217;t know which combinations might
be used, so we centralize the creation and management of an onscreen
window here.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.register_pygame_handler">
<tt class="descname">register_pygame_handler</tt><big>(</big><em>event</em>, <em>handler</em><big>)</big></dt>
<dd><p>Registers a method to be a handler for a certain type of Pygame
event.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>event</strong> &#8211; A string of the Pygame event name you&#8217;re registering this</li>
<li><strong>for.</strong> (<em>handler</em>) &#8211; </li>
<li><strong>handler</strong> &#8211; A method that will be called when this Pygame event is</li>
<li><strong>posted.</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.request_pygame">
<tt class="descname">request_pygame</tt><big>(</big><big>)</big></dt>
<dd><p>Called by a module to let the system know it would like to use
Pygame. We centralize the requests instead of letting each module do
their own pygame.init() so we get it in one place and can get everthing
initialized in the right order.</p>
<p>Returns: True or False, depending on whether pygame is available or not.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.reset">
<tt class="descname">reset</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Processes an incoming BCP &#8216;reset&#8217; command.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.run">
<tt class="descname">run</tt><big>(</big><big>)</big></dt>
<dd><p>Main run loop.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.send">
<tt class="descname">send</tt><big>(</big><em>bcp_command</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>Sends a BCP command to the connected pinball controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>bcp_command</strong> &#8211; String of the BCP command name.</li>
<li><strong>callback</strong> &#8211; Optional callback method that will be called when the
command is sent.</li>
<li><strong>**kwargs</strong> &#8211; Optional additional kwargs will be added to the BCP
command string.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.send_dmd_frame">
<tt class="descname">send_dmd_frame</tt><big>(</big><em>data</em><big>)</big></dt>
<dd><p>Sends a DMD frame to the BCP client.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> &#8211; A 4096-length raw byte string.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.shutdown">
<tt class="descname">shutdown</tt><big>(</big><big>)</big></dt>
<dd><p>Shuts down and exits the media controller.</p>
<p>This method will also send the BCP &#8216;goodbye&#8217; command to any connected
clients.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.socket_thread_stopped">
<tt class="descname">socket_thread_stopped</tt><big>(</big><big>)</big></dt>
<dd><p>Notifies the media controller that the socket thread has stopped.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.start_socket_thread">
<tt class="descname">start_socket_thread</tt><big>(</big><big>)</big></dt>
<dd><p>Starts the BCPServer socket thread.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.media_controller.core.media_controller.MediaController.timer_tick">
<tt class="descname">timer_tick</tt><big>(</big><big>)</big></dt>
<dd><p>Called by the platform each machine tick based on self.HZ</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/mpf.media_controller.core.media_controller.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">Mission Pinball Framework 0.17 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Brian Madden, Gabe Knuth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>