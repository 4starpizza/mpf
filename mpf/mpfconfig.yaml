# config_version=2
# This file contains configuration options for the MPF itself, including
# default settings for your machine-wide game-specific config files.

# You should create specific subfolders for each game you want to make and put
# config files there to override these defaults.

mpf:
    system_modules: !!omap  # order is important here
        - timing: mpf.system.timing.Timing
        - events: mpf.system.events.EventManager
        - switch_controller: mpf.system.switch_controller.SwitchController
        - ball_controller: mpf.system.ball_controller.BallController
        - modes: mpf.system.modes.ModeController
        - light_controller: mpf.system.light_controller.LightController
        - bcp: mpf.system.bcp.BCP
        - shots: mpf.system.shots.ShotController
        - logic_blocks: mpf.system.logic_blocks.LogicBlocks
        - scoring: mpf.system.scoring.ScoreController
        - target_controller: mpf.system.target_controller.TargetController

    device_modules:
        driver.Driver
        switch.Switch
        matrix_light.MatrixLight
        led.LED
        gi.GI
        autofire.AutofireCoil
        ball_device.BallDevice
        drop_target.DropTarget
        drop_target.DropTargetBank
        target.Target
        target.TargetGroup
        flipper.Flipper
        diverter.Diverter
        score_reel.ScoreReel
        score_reel.ScoreReelGroup
        flasher.Flasher
        playfield_transfer.PlayfieldTransfer
        ball_lock.BallLock
    
    plugins:
        auditor
        ball_save
        ball_search
        info_lights
        osc
        socket_events
        switch_player

    paths:
        scriptlets: scriptlets
        shows: shows
        audits: audits/audits.yaml
        machine_files: machine_files
        config: config
        modes: modes

    default_pulse_ms: 10
    default_flash_ms: 50
    auto_create_switch_events: True
    switch_event_active: "%_active"
    switch_event_inactive: "%_inactive"
    switch_tag_event: sw_%
    
    device_events:
        autofire_coils:
            enable: ball_started
            disable: ball_ending, tilt, slam_tilt
        ball_devices:
            request_ball:
            stop:
            eject:
            eject_all:
        ball_locks:
            enable: ball_started
            disable: ball_ending
            reset: machine_reset_phase_3
        diverters:
            enable:
            disable:
            activate:
            deactivate:
        drop_targets:
            enable: ball_started
            disable: ball_ending, tilt, slam_tilt
            reset: ball_starting, machine_reset_phase_3
            knockdown:
            hit:
            remove_profile:
            advance:
        drop_target_banks:
            enable: ball_started
            disable: ball_ending, tilt, slam_tilt
            reset: machine_reset_phase_3, ball_starting
            advance:
        coils:
            enable:
            disable:
            pulse:
        flashers:
            flash:
        flippers:
            enable: ball_started
            disable: ball_ending, tilt, slam_tilt
            enable_no_hold:
            invert:
        gis:
            enable: machine_reset_phase_3
            disable:
        matrix_lights:
            "on":
            "off":
        targets:
            enable: ball_started
            disable: ball_ending, tilt, slam_tilt
            reset:
            advance:
            hit:
            remove_profile:
        target_groups:
            enable: ball_started
            disable: ball_ending, tilt, slam_tilt
            reset:
            rotate_left:
            rotate_right:
            advance:


# Default settings for machines. All can be overridden

machine:
    Balls Installed: 1
    Min Balls: 1
    Max Balls: 6

timing:
    hz: 30
    hw_thread_sleep_ms: 1

hardware:
    platform: virtual
    coils: default
    switches: default
    matrix_lights: default
    leds: default
    dmd: default
    gis: default
    flashers: default

p_roc:
    lamp_matrix_strobe_time: 100
    watchdog_time: 1000
    use_watchdog: True

fast:
    baud: 921600
    watchdog: 1s
    default_debounce_close: 10ms
    default_debounce_open: 30ms


led_settings:
    brightness_compensation: 1.0
    default_led_fade_ms: 100
    gamma: 2.5
    whitepoint: 1.0, 1.0, 1.0
    linear_slope: 1.0
    linear_cutoff: 0.0
    keyframe_interpolation: True
    dithering: True

game:
    Balls per game: 3
    Max players per game: 4

machine_flow:
    mpf.game.attract.Attract
    mpf.game.game.Game

auditor:
    save_events:
        game_started
        ball_ended
        game_ended
    num_player_top_records: 10
    audit:
        shots
        switches
        events
        player
    events:
        ball_search_begin_phase1
        game_started
        game_ended
    player:
        score

ball_search:
    Secs until ball search start: 10
    Secs between ball search rounds: 3
    Secs between ball search coils: .15
    If ball search fails: Keep Looking

logic_blocks:

    counters:

        tilt:
            count_events: sw_tilt
            event_when_hit: tilt_hit
            count_complete_value: 3
            events_when_complete: tilt
            multiple_hit_window: 500ms
            reset_each_ball: yes

        slam_tilt:
            count_events: sw_slamTilt
            count_complete_value: 1
            events_when_complete: slam_tilt

displaydefaults:
    text:
        font: default
        size: 10
        opaque: false
        v_pos: center
        h_pos: center
        x: 0
        y: 0
        time: 0s
        text_color: ffffff
        background_color: 000000
        text_shade: 15
        background_shade: 0
        antialias: False

fonts:
    default:
        file: Quadrit.ttf
        size: 10
        crop_top: 2
        crop_bottom: 3
    space title huge:
        file: DEADJIM.TTF
        size: 29
        antialias: yes
        crop_top: 3
        crop_bottom: 3
    space title:
        file: DEADJIM.TTF
        size: 21
        antialias: yes
        crop_top: 2
        crop_bottom: 3
    medium:
        file: pixelmix.ttf
        size: 8
        crop_top: 1
        crop_bottom: 1
    small:
        file: smallest_pixel-7.ttf
        size: 9
        crop_top: 2
        crop_bottom: 3
    tall title:
       file: big_noodle_titling.ttf
       size: 20

textstrings:
    volume_zero: OFF
    volume_max: MAX

asset_defaults:
    shows:
        default:
            load: preload

bcp:
    connections:
        local_display:
            host: localhost
            port: 5050
            connection_attempts: 5
            require_connection: no

    event_map:
        ball_started:
            command: ball_start
            params:
                player: "%player"
                ball: "%ball"

        ball_ending:
            command: ball_end

        attract_start:
            command: attract_start

        attract_stop:
            command: attract_stop

        game_ended:
            command: game_end

        player_turn_start:
            command: player_turn_start
            params:
                player: "%number"

    player_variables:
      __all__

volume:
    tracks:
        master: 20
        voice: 20
        sfx: 20
        music: 20
    steps: 20

open_pixel_control:
    host: localhost
    port: 7890
    connection_required: no
    connection_attempts: -1
    number_format: int

triggers:
    assets_to_load:
        bcp_name: assets_to_load
        params:
            assets: "%assets"
    assets_loading_complete:
        bcp_name: assets_loading_complete

target_profiles:
    default:
        steps:
          - name: unlit
            light_script: "off"
          - name: lit
            light_script: "on"
                
    drop_target:
        steps:
          - name: up
            light_script: "off"
          - name: down
            light_script: "on"
    hit_me:
        steps:
            - name: active
              light_script: flash
              repeat: yes
              tocks_per_sec: 5
            - name: complete
              light_script: "off"

light_scripts:
    flash:
        - tocks: 1
          color: ff
        - tocks: 1
          color: 0
    "on":
        - tocks: 1
          color: ff
    "off":
        - tocks: 1
          color: 0
